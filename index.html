<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ghostbusters Beam Simulation</title>
  <style>
    body { background: #111; color: #eee; text-align: center; font-family: sans-serif; }
    canvas { background: #222; display: block; margin: auto; }
    .controls { margin-top: 1em; }
    label { margin: 0 1em; }
  </style>
</head>
<body>
  <h1>Ghostbusters Beam vs Magnetic Wall</h1>
  <p>You’re Egon. Your positively charged beam hits a magnetic field in the wall. Watch it curve!</p>
  <canvas id="sim" width="800" height="400"></canvas>
  
  <div class="controls">
    <label>
      Exit Angle (°):
      <input type="range" id="angle" min="-45" max="45" value="0">
    </label>
    <label>
      Magnetic Field (B):
      <input type="range" id="B" min="-5" max="5" step="0.1" value="1">
    </label>
  </div>

<script>
const canvas = document.getElementById('sim');
const ctx = canvas.getContext('2d');

let angle = 0; // degrees
let B = 1;     // Tesla (arbitrary scale)

// constants for visualization scaling
const m = 1;     // "mass units"
const q = 1;     // "charge units"
const v = 100;   // px/s

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // draw "wall" where B field starts
  const wallX = canvas.width * 0.25;  // Shift wall to 25% of canvas width //CHANGED LINE
  ctx.strokeStyle = 'cyan';
  ctx.beginPath();
  ctx.moveTo(wallX, 0);
  ctx.lineTo(wallX, canvas.height);
  ctx.stroke();
  
  // draw B field indicator
  ctx.fillStyle = (B > 0) ? 'red' : 'blue';
  ctx.font = '16px sans-serif';
  ctx.fillText(B > 0 ? 'B into screen' : 'B out of screen', wallX + 10, 20);
  
  // initial position and velocity
  let x = 100;
  let y = canvas.height / 2;
  let theta = angle * Math.PI / 180;
  let vx = v * Math.cos(theta);
  let vy = v * Math.sin(theta);
  
  ctx.strokeStyle = 'yellow';
  ctx.beginPath();
  ctx.moveTo(x, y);
  
  const dt = 0.01;
  for (let t = 0; t < 5; t += dt) {
    if (x >= wallX) {
      // apply Lorentz force
      let ax = (q * vy * B) / m;
      let ay = (-q * vx * B) / m;
      vx += ax * dt;
      vy += ay * dt;
    }
    x += vx * dt;
    y += vy * dt;
    ctx.lineTo(x, y);
  }
  ctx.stroke();
}

document.getElementById('angle').addEventListener('input', e => {
  angle = parseFloat(e.target.value);
  draw();
});
document.getElementById('B').addEventListener('input', e => {
  B = parseFloat(e.target.value);
  draw();
});

draw();
</script>
</body>
</html>
